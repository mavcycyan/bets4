$(function(){function a(){var a=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0];if(!(s&&a||t&&!a)){for(var b,c=$(".receive_form_block.checked .game_item.nice_item input.item_checkbox_js"),d=[],e=0;e<c.length;e++)b=c[e],d.push($(b).val());var g,u;a?(0===l&&$("div#all_items_to_ex_items").empty(),s=!0,$("div#all_items_to_ex_items").append(loading_html),u="https://"+window.location.host+"/engine/function/my-items-loader-ex.php",g={sort_by_price:h,sort_by_rarity:i,sort_by_game:j,sort_by_name:k,sort_item_start_index:l,num_of_items_per_load:m,items_ids_exclude:JSON.stringify(d)}):(0===q&&$("div#all_items_to_my_items").empty(),t=!0,$("div#all_items_to_my_items").append(loading_html),u="https://"+window.location.host+"/engine/function/my-items-loader-my.php",g={sort_by_price:1,sort_by_rarity:n,sort_by_game:o,sort_by_name:p,sort_item_start_index:q,num_of_items_per_load:r,items_ids_exclude:JSON.stringify(d)});var v=$.post(u,g);v.done(function(b){a?(l+=m,$("div#all_items_to_ex_items").append(b)):(q+=r,$("div#all_items_to_my_items").append(b))}),v.always(function(){a?($("div#all_items_to_ex_items #loading").remove(),$("div#clear_load_button_all_items_to_ex_my_items_load").remove(),s=!1):($("div#all_items_to_my_items #loading").remove(),$("div#clear_load_button_all_items_to_my_my_items_load").remove(),t=!1),f(),fix_horisontal_margins(".margin_fix_js",".game_item",5)})}}function b(b){var c=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],e=$(this).data("order-withdraw");"undefined"==typeof e&&(e=-1),"undefined"!=typeof b&&(e=b),$(this).data("order-withdraw",-1*e),h=-1*e,d(e),a(c)}function c(a){var b=$(".items__tabs_bottonm-weapon .items_my:visible"),c=b.children(".game_item"),e=$(this).data("order-deposit");"undefined"==typeof e&&(e=-1),"undefined"!=typeof a&&(e=a),c.sort(function(c,a){var b=$(c).find(".item_value").data("price"),d=$(a).find(".item_value").data("price");return b>d?1*e:b<d?-1*e:0}),$(this).data("order-deposit",-1*e),d(e),c.detach().appendTo(b)}function d(a){1==a?($(".sort_items_by_price_js_up:visible").removeClass("active"),$(".sort_items_by_price_js_down:visible").addClass("active")):-1==a?($(".sort_items_by_price_js_up:visible").addClass("active"),$(".sort_items_by_price_js_down:visible").removeClass("active")):($(".sort_items_by_price_js_up:visible").removeClass("active"),$(".sort_items_by_price_js_down:visible").removeClass("active"))}function e(){$(".items__tabs_middle-weapon-items:visible .game_item").each(function(a,b){$(b).find(".item_checkbox_js").click()})}function f(){var a=0;$(".items__tabs_middle-weapon-items:visible .game_item:visible").each(function(){a+=parseFloat($(this).find(".item_value").data("price"))}),a=toFixed(a,2),$(".bet-content__betcoin_money:visible").text(a+"$").data("betcoin",a),$(".items__tabs_middle .user_items_price:visible").text(a);var b=0;$(".items__tabs_bottonm-weapon:visible .game_item:visible").each(function(){b+=parseFloat($(this).find(".item_value").data("price"))}),b=toFixed(b,2),$(".items__tabs_bottom .user_items_price:visible").text(b),g()}function g(){var a=$(".items__tabs_middle-betcoin-bottom:visible");.001<a.find(".bet-content__betcoin_money").data("betcoin")?a.removeClass("no-coins"):a.addClass("no-coins")}var h=1,i="Rarity All",j="Game All",k="",l=0,m=200,n="Rarity All",o="Game All",p="",q=0,r=200;try{m=20*Math.floor(parseInt($(".items__tabs_bottonm-weapon:visible").width())/115),r=m}catch(a){console.error(a)}m||(m=200),r||(r=200);var s=!1,t=!1;a(!1),a();$("body").on("click","#load_button_all_items_to_ex_my_items",function(){$(this).parents(".btn_div").remove(),a()}),$("body").on("click",".items__tab",function(){if(!$(this).hasClass("items__tab-active")){$(".items__tab").removeClass("items__tab-active"),$(this).addClass("items__tab-active"),$(".items__tabs_bottom__container>div").hide().removeClass("checked"),$(".items__tabs_middle__container>div").hide().removeClass("checked");var a=$(".items__tab-active").data("link");$(".items__tabs_middle".concat(a)).show().addClass("checked"),$(".items__tabs_bottom".concat(a)).show().addClass("checked"),f(),fix_horisontal_margins(".margin_fix_js",".game_item",5)}}),$("body").on("click",".items__tabs_bottom-tabs.checked div",function(){if(!$(this).hasClass("checked")){e();var a=$(this).data("show_container");$(".items__tabs_bottom-tabs.checked div").removeClass("checked"),$(this).addClass("checked"),$(".insert_items_block").removeClass("checked").hide(),$(a).addClass("checked").show()}}),$(".items__tabs").on("click",".game_item.nice_item",function(a){if("INPUT"==a.target.tagName){if($("#activ").length)return"ru"==lang?addAlert("Error","\u0423 \u0432\u0430\u0441 \u0443\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 \u043E\u0431\u043C\u0435\u043D. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u0440\u0438\u043C\u0438\u0442\u0435 \u043E\u0431\u043C\u0435\u043D \u0438 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443"):addAlert("Error","You already have active trade. Accept tradeoffer and refresh page before next trade"),!1;if($(this).find("span.lock-item").length)return!1;if(0!=$(this).parents(".insert_items_block").length&&10<=$(".deposit_form_block:visible .game_item.nice_item").length)return void("ru"==lang?addAlert("Error","\u0412\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442\u0435 \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0431\u043E\u043B\u0435\u0435 10 \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u043E\u0432 \u0432 \u043E\u0434\u0438\u043D \u043E\u0431\u043C\u0435\u043D"):addAlert("Error","You can't add more than 10 items per trade"));$(this).parent().hasClass("items_my")?($(this).find("input.item_checkbox_js").prop("checked",!0),$(".items__tabs_middle-weapon-items:visible").prepend($(this))):$(this).parent().hasClass("items__tabs_middle-weapon-items")&&($(this).find("input.item_checkbox_js").prop("checked",!1),$(".items__tab_bottom.checked .items-tab.checked .items_my").prepend($(this))),0==$(".items__tabs_middle .items__tabs_middle-weapon-items:visible .game_item").length?$(".items__tabs_middle-weapon-items:visible .items__tabs_middle-no_item-bottom").show():$(".items__tabs_middle-weapon-items:visible .items__tabs_middle-no_item-bottom").hide(),f(),fix_horisontal_margins(".margin_fix_js",".game_item",5)}}),$("#container_receive_ex").on("change",".rarity_filter",function(){i=$(this).val(),j="Game All",$("#container_receive_ex .selectbox_game").val(j),l=0,a()}),$("#container_receive_ex").on("change",".selectbox_game",function(){j=$(this).val(),i="Rarity All",$("#container_receive_ex .rarity_filter").val(i),l=0,a()});$("#container_receive_ex").on("keyup",".search_site_items_input",function(){var b=$(this).val();k!=b&&(b.length>=3||0==b.length)&&(k=b,l=0,a())}),$("#container_receive_ex").on("click",".items__tabs_bottom-top-sort",function(){l=0,b()}),$("#container_receive_my").on("change",".rarity_filter",function(){n=$(this).val(),o="Game All",$("#container_receive_my .selectbox_game").val(o),q=0,a(!1)}),$("#container_receive_my").on("change",".selectbox_game",function(){o=$(this).val(),n="Rarity All",$("#container_receive_my .rarity_filter").val(n),q=0,a(!1)});$("#container_receive_my").on("keyup",".search_site_items_input",function(){var b=$(this).val();p!=b&&(b.length>=3||0==b.length)&&(p=b,q=0,a(!1))}),$("#container_receive_my").on("click",".items__tabs_bottom-top-sort",function(){q=0,b(void 0,!1)}),$(".insert_items_block").on("click",".items__tabs_bottom-top-sort",function(){c()}),$(".insert_items_block").on("change",".rarity_filter",function(){var a=$(this).val(),b=$(".items__tabs_bottonm-weapon .items_my:visible");b.children(".game_item").each(function(){$(this).find(".item_type").data("rarity")==a||"Rarity All"==a?$(this).show():$(this).hide()}),f()}),$(".insert_items_block").on("keyup",".search_site_items_input_js",function(){var a=$(this).val().toLowerCase(),b=$(".items__tabs_bottonm-weapon .items_my:visible");b.children(".game_item").each(function(){$(this).text().toLowerCase().includes(a)?$(this).show():$(this).hide()}),f()}),$(document).on("click",".items_selected_cancel_js",function(){e()}),$(document).on("click",".button-load-ajax",function(){var a=$(this).parents(".items_my"),b=a.data("url");$(this).hide(),a.append(loading_html),$.ajax({url:b,success:function success(b){$(".price_market_message").show(),a.html(b),f(),c(-1),fix_horisontal_margins(".margin_fix_js",".game_item",5)}})}),$(window).resize(function(){fix_horisontal_margins(".margin_fix_js",".game_item",5)})});