$(function(){$("body").on("click",".form_for_js_in_div .button_for_js_in_div",function(){for(var a,b=$(this),c=b.attr("name"),d=$(this).parents(".form_for_js_in_div"),e=d.data("action"),f=d.find("input"),g={},h=0;h<f.length;h++)if(a=f.eq(h),"radio"!=a.attr("type")||a.prop("checked")){var j=a.attr("name"),k=a.val();j&&j.includes("[]")?(null==g[j]&&(g[j]=[]),g[j].push(k)):g[j]=k}var l=d.find("textarea.g-recaptcha-response");l&&(g["g-recaptcha-response"]=l.val()),g.button_name=c,b.prop("disabled",!0),b.prepend(loading_html_mini);var m=$.post("https://"+window.location.host+e,g);if(m.done(function(a){if($(".response_block_close_js_answer").remove(),$("div.blackout").remove(),"/engine/function/user_trades_post.php"==e){if(d.hasClass("action-modal")||g.cancel_item_selling)return a.response?a.response.user_trade_id?a.response.price?($(".trade_id_".concat(a.response.user_trade_id)).data("price",a.response.price),$(".trade_id_".concat(a.response.user_trade_id)).text(a.response.price+"$"),void d.find("div.response_block_close_js").click()):($(".trade_id_".concat(a.response.user_trade_id)).parents(".auction-salling__item").remove(),void d.find("div.response_block_close_js").click()):void 0:void 0;if(d.hasClass("pay__buy_top")){if(a.response){$(".auction-salling").show(),$(".auction-salling__items").append(a.response.trade);var b=d.find(".game_item.nice_item");return b.find("input.item_checkbox_js").click(),void b.remove()}if(a.error)return void $("body").append(a.error)}}try{if(a.response&&a.response.return_url)return void window.location.replace(a.response.return_url);if(a.error)return void $("body").append(a.error)}catch(a){console.error(a)}$("body").append(a),$(".mCustomScrollbar")&&$(".mCustomScrollbar").mCustomScrollbar()}),m.fail(function(a,b,c){console.error("error posting",e),console.error(a,b,c),$(".response_block_close_js_answer").remove(),$("div.blackout").remove()}),m.always(function(){b.prop("disabled",!1),b.find(".loading-div__mini_b").remove()}),$(this).hasClass("response_block_close_js"))return $("div.blackout").remove(),void d.remove()})});